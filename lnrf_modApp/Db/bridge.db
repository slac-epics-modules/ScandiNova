# current event

record (stringin,"$(P):CurrentEventTimeStr") {
	field(DESC, "Timestamp of the current event in mod")
}

record (stringin,"$(P):CurrentEventTypeStr") {
	field(DESC, "Event type of the current event in mod")
}

record (longin,"$(P):CurrentEventTrigger") {
	field(DESC, "Trigger ID of the current event in mod")
}

record (stringin,"$(P):CurrentEventSubsystemStr") {
	field(DESC, "Text explanation of the current event")
}

record (stringin,"$(P):CurrentEventTextStr") {
	field(DESC, "Text explanation of the current event")
}

record (stringin,"$(P):CurrentEventTextStr2") {
	field(DESC, "Second half of MainEventTextStr")
}

record (stringin,"$(P):CurrentEventUnitStr") {
	field(DESC, "Units to measure current event data")
}

record (stringin,"$(P):CurrentEventDataStr") {
	field(DESC, "Data associated with the current event")
}

record (aSub,"$(P):CurrentEventStructBridge") {
	field(SNAM,"handle_current_event_struct_modify")

	field(INPA,"$(P):CurrentEventStruct CP")
	field(FTA,"LONG")
	field(NOA,"13")

	field(OUTA,"$(P):CurrentEventTimeStr PP")
	field(FTVA,"STRING")
	field(NOVA,"64")

	field(OUTB,"$(P):CurrentEventTypeStr PP")
	field(FTVB,"STRING")
	field(NOVB,"64")

	field(OUTC,"$(P):CurrentEventTrigger PP")
	field(FTVC,"LONG")
	field(NOVC,"1")

	field(OUTD,"$(P):CurrentEventSubsystemStr PP")
	field(FTVD,"STRING")
	field(NOVD,"64")

	field(OUTE,"$(P):CurrentEventTextStr PP")
	field(FTVE,"STRING")
	field(NOVE,"64")

	field(OUTF,"$(P):CurrentEventTextStr2 PP")
	field(FTVF,"STRING")
	field(NOVF,"64")

	field(OUTG,"$(P):CurrentEventUnitStr PP")
	field(FTVG,"STRING")
	field(NOVG,"64")

	field(OUTH,"$(P):CurrentEventDataStr PP")
	field(FTVH,"STRING")
	field(NOVH,"64")
}

# interlock event

record (stringin,"$(P):InterlockEventTimeStr") {
	field(DESC, "Timestamp of the interlock event in mod")
}

record (stringin,"$(P):InterlockEventTypeStr") {
	field(DESC, "Event type of the interlock event in mod")
}

record (longin,"$(P):InterlockEventTrigger") {
	field(DESC, "Trigger ID of the interlock event in mod")
}

record (stringin,"$(P):InterlockEventSubsystemStr") {
	field(DESC, "Text explanation of the interlock event")
}

record (stringin,"$(P):InterlockEventTextStr") {
	field(DESC, "Text explanation of the interlock event")
}

record (stringin,"$(P):InterlockEventTextStr2") {
	field(DESC, "Second half of InterlockEventTextStr")
}

record (stringin,"$(P):InterlockEventUnitStr") {
	field(DESC, "Units to measure interlock event data")
}

record (stringin,"$(P):InterlockEventDataStr") {
	field(DESC, "Data associated with the interlock event")
}

record (aSub,"$(P):InterlockEventStructBridge") {
	field(SNAM,"handle_interlock_event_struct_modify")

	field(INPA,"$(P):InterlockEventStruct CP")
	field(FTA,"LONG")
	field(NOA,"13")

	field(OUTA,"$(P):InterlockEventTimeStr PP")
	field(FTVA,"STRING")
	field(NOVA,"64")

	field(OUTB,"$(P):InterlockEventTypeStr PP")
	field(FTVB,"STRING")
	field(NOVB,"64")

	field(OUTC,"$(P):InterlockEventTrigger PP")
	field(FTVC,"LONG")
	field(NOVC,"1")

	field(OUTD,"$(P):InterlockEventSubsystemStr PP")
	field(FTVD,"STRING")
	field(NOVD,"64")

	field(OUTE,"$(P):InterlockEventTextStr PP")
	field(FTVE,"STRING")
	field(NOVE,"64")

	field(OUTF,"$(P):InterlockEventTextStr2 PP")
	field(FTVF,"STRING")
	field(NOVF,"64")

	field(OUTG,"$(P):InterlockEventUnitStr PP")
	field(FTVG,"STRING")
	field(NOVG,"64")

	field(OUTH,"$(P):InterlockEventDataStr PP")
	field(FTVH,"STRING")
	field(NOVH,"64")
}

# events for logging to a file

record (aSub,"$(P):EventBridge") {
	field(SNAM,"handle_event_log_modify")

	field(INPA,"$(P):EventIndex CP")
	field(FTA,"LONG")
	field(NOA,"1")

	field(INPB,"$(P):EventIncrement CP")
	field(FTB,"LONG")
	field(NOB,"50")

	field(INPC,"$(P):EventTime1 CP")
	field(FTC,"LONG")
	field(NOC,"50")

	field(INPD,"$(P):EventTime2 CP")
	field(FTD,"LONG")
	field(NOD,"50")

	field(INPE,"$(P):EventType CP")
	field(FTE,"LONG")
	field(NOE,"50")

	field(INPF,"$(P):EventTrigger CP")
	field(FTF,"LONG")
	field(NOF,"50")

	field(INPG,"$(P):EventCause CP")
	field(FTG,"LONG")
	field(NOG,"50")

	field(INPH,"$(P):EventTextNum CP")
	field(FTH,"LONG")
	field(NOH,"50")

	field(INPI,"$(P):EventDataType CP")
	field(FTI,"LONG")
	field(NOI,"50")

	field(INPJ,"$(P):EventData CP")
	field(FTJ,"LONG")
	field(NOJ,"50")
}

# waveform

record (stringin,"$(P):WaveformTimeStr") {
	field(DESC, "Timestamp of the selected waveform")
}

record (aSub,"$(P):WaveformTimeBridge") {
	field(SNAM, "handle_waveform_timestamp_modify")

	field(INPA, "$(P):WaveformTime CP")
	field(FTA,  "LONG")
	field(NOA,  "4")

	field(OUTA, "$(P):WaveformTimeStr PP")
	field(FTVA, "STRING")
	field(NOVA, "64")
}

# watchdog

record (calcout,"$(P):CalcWatchdog") {
	field(FLNK,"$(P):CommWatchdog.PROC")
	field(SCAN,"1 second")
	field(INPA,"$(P):CalcWatchdog.VAL NPP NMS")
	field(CALC,"(A+1)%0x10000")
	field(OUT,"$(P):CommWatchdog")
	field(OOPT,"Every Time")
	field(DOPT,"Use CALC")
}
